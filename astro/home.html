<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Starry Jae — Daily Transits</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="icon" type="image/png" href="assets/starryjaelogo.png">

<style>
:root{
  --black:#000010;--silver:#f0f0f5;--gray:#bfbfdc;
  --accent:#00c9c2;--primary:#9a9ad4;--secondary:#c13886;
}
@font-face{font-family:'Jaewriting';src:url('/assets/Jaewriting-Regular.otf')}
@font-face{font-family:'Milky';src:url('/assets/tan-mon-cheri.woff')}
@font-face{font-family:'Astro';src:url('/assets/Astrocomplete-Regular.otf')}

*{margin:0;padding:0;box-sizing:border-box}
body{
  background:var(--black);color:var(--silver);
  font-family:'Jaewriting',system-ui,sans-serif;
  line-height:1.8;overflow-x:hidden
}

nav{
  display:flex;justify-content:space-between;align-items:center;
  padding:2rem 3rem;background:rgba(0,0,16,0.8);
  backdrop-filter:blur(20px)
}
.logo{
  font-family:'Milky';font-size:2.2rem;letter-spacing:3px;
  background:linear-gradient(135deg,#ffb3d6,var(--accent),var(--primary));
  -webkit-background-clip:text;-webkit-text-fill-color:transparent
}
.nav-links{display:flex;gap:2rem}
.nav-links a{color:var(--gray);text-decoration:none}

.container{max-width:1200px;margin:auto;padding:4rem 2rem}

.card{
  background:linear-gradient(135deg,rgba(154,154,212,.08),rgba(63,61,122,.4));
  border-radius:30px;padding:3rem;margin-bottom:3rem
}

h2{
  font-family:'Milky';font-size:2.5em;margin-bottom:2rem;
  background:linear-gradient(135deg,var(--silver),var(--primary));
  -webkit-background-clip:text;-webkit-text-fill-color:transparent
}

.transit{
  margin-bottom:2rem;padding:1.5rem;
  background:#1D1D45;
  border-left:3px solid var(--primary);
  border-radius:15px;
  line-height:1.8;
}


.transit-header{
  display:flex;justify-content:space-between;gap:1rem;flex-wrap:wrap
}

.glyphs{
  background:rgba(0,0,0,.3);
  padding:.5rem 1rem;border-radius:25px
}

.astro-symbol{
  font-family:'Astro';
  font-size:2.5rem;
  letter-spacing:.35rem;
  white-space:nowrap
}

.label{
  color:var(--accent);
  font-family:'Milky';
  margin-right:1rem;
  font-size:1.5rem;
}

.sign-grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(140px,1fr));
  gap:1rem
}

  .sign-btn[data-sign="Aries"]:hover{
  background:#ffc545;
}
.sign-btn[data-sign="Taurus"]:hover{
  background:#a73af6;
}
.sign-btn[data-sign="Gemini"]:hover{
  background:#32d2ff;
}
.sign-btn[data-sign="Cancer"]:hover{
  background:#ec9cd0;
}
.sign-btn[data-sign="Leo"]:hover{
  background:#b9ff29;
}
.sign-btn[data-sign="Virgo"]:hover{
  background:#462b89;
}
.sign-btn[data-sign="Libra"]:hover{
  background:#630da7;
}
.sign-btn[data-sign="Scorpio"]:hover{
  background:#633223;
}
.sign-btn[data-sign="Sagittarius"]:hover{
  background:#f01ff7;
}
.sign-btn[data-sign="Capricorn"]:hover{
  background:#50c2c2;
}
.sign-btn[data-sign="Aquarius"]:hover{
  background:#645cf5;
}
.sign-btn[data-sign="Pisces"]:hover{
  background:#77cbb4;
}
.sign-btn{
  padding:1rem;
  border-radius:50px;
  background:rgba(154,154,212,.15);
  text-align:center;
  text-decoration:none;
  font-family:'Astro';
  color:var(--silver);
  transition:background .3s ease, box-shadow .3s ease, transform .2s ease;
}


.tarot-display{text-align:center;letter-spacing:3px; line-height:1.6;}
.tarot-card-img{max-width:280px;border-radius:15px}
.draw-button{margin-top:2rem;padding:1rem 3rem;border-radius:50px}

.tarot-placeholder{color:var(--gray);font-style:italic}
.tarot-timer{color:var(--accent);margin-top:.5rem}
</style>
</head>

<body>

<nav>
  <div class="logo">Starry Jae</div>
  <div class="nav-links">
    <a href="#explore-signs">Sign Wikis</a>
    <a href="/index.html">Home</a>
    <a href="/shop/home.html">Shop</a>
  </div>
</nav>

<div class="container">

<div class="card">
  <h2>Today's Transits</h2>
  <div id="transits"></div>
</div>

<div class="card">
  <h2>Daily Tarot Draw</h2>
  <div id="tarot-container">
    <div id="tarot-card" class="tarot-display"></div>
    <button id="draw-btn" class="draw-button">Draw Your Card</button>
  </div>
</div>

<div class="card">
  <h2 id="explore-signs">Explore Your Sign</h2>
  <div class="sign-grid">
    <a class="sign-btn" data-sign="Aries">a</a>
    <a class="sign-btn" data-sign="Taurus">u</a>
    <a class="sign-btn" data-sign="Gemini">g</a>
    <a class="sign-btn" data-sign="Cancer">c</a>
    <a class="sign-btn" data-sign="Leo">l</a>
    <a class="sign-btn" data-sign="Virgo">R</a>
    <a class="sign-btn" data-sign="Libra">b</a>
    <a class="sign-btn" data-sign="Scorpio">s</a>
    <a class="sign-btn" data-sign="Sagittarius">t</a>
    <a class="sign-btn" data-sign="Capricorn">n</a>
    <a class="sign-btn" data-sign="Aquarius">q</a>
    <a class="sign-btn" data-sign="Pisces">p</a>
  </div>
</div>

</div>

<script>
/* ---------- AUTO MIDNIGHT REFRESH ---------- */
function scheduleMidnightRefresh(){
  const now = new Date();
  const midnight = new Date(now);
  midnight.setDate(midnight.getDate()+1);
  midnight.setHours(0,0,1,0);
  setTimeout(()=>location.reload(), midnight-now);
}
scheduleMidnightRefresh();

/* ---------- UTIL ---------- */
const norm = d => ((d%360)+360)%360;
const diff = (a,b)=>Math.abs(a-b)>180?360-Math.abs(a-b):Math.abs(a-b);

/* ---------- SYMBOLS ---------- */
const planetSymbols={Sun:'S',Moon:'M',Mercury:'R',Venus:'V',Mars:'P',Jupiter:'J',Saturn:'T',Uranus:'U',Neptune:'N',Pluto:'O',Chiron:'i',Node:'A'};
const signSymbols={Aries:'a',Taurus:'u',Gemini:'g',Cancer:'c',Leo:'l',Virgo:'m',Libra:'b',Scorpio:'s',Sagittarius:'t',Capricorn:'n',Aquarius:'q',Pisces:'p'};
const signColors={
Aries:'#d01f49',Taurus:'#50c878',Gemini:'#FFE866',Cancer:'#6e8aa5',
  Leo:'#f17611',Virgo:'#e0ad87',Libra:'#e60498',Scorpio:'#952a6a',
  Sagittarius:'#2d41e7',Capricorn:'#7a5455',Aquarius:'#88e7db',Pisces:'#A73AF6'
};
const aspectSymbols={conjunction:'&',opposition:'-',square:'!',trine:'k',sextile:"'"};

/* ---------- PLANETS ---------- */
const planets={
  Sun:{lon:280,speed:.9856,domain:"identity"},
  Moon:{lon:90,speed:13.176,domain:"emotions"},
  Mercury:{lon:270,speed:-1.2,domain:"communication"},
  Venus:{lon:275,speed:1.2,domain:"love"},
  Mars:{lon:260,speed:.5,domain:"action"},
  Jupiter:{lon:100,speed:-.083,domain:"growth"},
  Saturn:{lon:330,speed:.033,domain:"structure"},
  Uranus:{lon:50,speed:-.012,domain:"change"},
  Neptune:{lon:355,speed:.006,domain:"dreams"},
  Pluto:{lon:300,speed:.004,domain:"transformation"},
  Chiron:{lon:15,speed:.01,domain:"healing"},
  Node:{lon:350,speed:-.003,domain:"destiny"}
};

const signs=["Aries","Taurus","Gemini","Cancer","Leo","Virgo","Libra","Scorpio","Sagittarius","Capricorn","Aquarius","Pisces"];
const ref=new Date("2026-01-01");
const days=Math.floor((new Date()-ref)/86400000);

Object.values(planets).forEach(p=>{
  p.pos=norm(p.lon+p.speed*days);
  p.sign=signs[Math.floor(p.pos/30)];
  p.motion=p.speed<0?"Retrograde":"Direct";
});

/* ---------- MOON PHASE ---------- */
function getMoonPhase(){
  const syn=29.530588853;
  const ref=new Date("2024-01-11T11:57:00Z");
  const age=((new Date()-ref)/86400000)%syn;
  if(age<1.8) return {name:"New Moon",glyph:","};
  if(age<5.5) return {name:"Waxing Crescent",glyph:"k"};
  if(age<9.2) return {name:"First Quarter",glyph:"Y"};
  if(age<12.9) return {name:"Waxing Gibbous",glyph:"h"};
  if(age<16.6) return {name:"Full Moon",glyph:"z"};
  if(age<20.3) return {name:"Waning Gibbous",glyph:"j"};
  if(age<24) return {name:"Last Quarter",glyph:"W"};
  return {name:"Waning Crescent",glyph:"Zs"};
}

const wrap=document.getElementById("transits");
const moonPhase=getMoonPhase();
const moonColor=signColors[planets.Moon.sign];

wrap.innerHTML+=`
<div class="transit">
  <div class="transit-header">
    <div><span class="label">Moon Phase:</span>${moonPhase.name} in <span style="color:${moonColor}">${planets.Moon.sign}</span></div>
    <div class="glyphs">
      <span class="astro-symbol" style="color:${moonColor}">${moonPhase.glyph}</span>
    </div>
  </div>
</div>`;

/* ---------- TAROT DATA ---------- */
const majorArcana=[
 {name:"The Fool",meaning:"New beginnings, innocence, spontaneity",image:"assets/tarot/00-fool.jpg"},
 {name:"The Magician",meaning:"Manifestation, power, inspired action",image:"assets/tarot/01-magician.jpg"},
 {name:"The High Priestess",meaning:"Intuition, sacred knowledge",image:"assets/tarot/02-high-priestess.jpg"},
 {name:"The Empress",meaning:"Nurturing, abundance, creation",image:"assets/tarot/03-empress.jpg"},
 {name:"The Emperor",meaning:"Authority, structure, leadership",image:"assets/tarot/04-emperor.jpg"},
 {name:"The Hierophant",meaning:"Tradition, spiritual wisdom",image:"assets/tarot/05-hierophant.jpg"},
 {name:"The Lovers",meaning:"Alignment, choices, relationships",image:"assets/tarot/06-lovers.jpg"},
 {name:"The Chariot",meaning:"Control, momentum, victory",image:"assets/tarot/07-chariot.jpg"},
 {name:"Strength",meaning:"Compassion, courage, inner power",image:"assets/tarot/08-strength.jpg"},
 {name:"The Hermit",meaning:"Introspection, inner guidance",image:"assets/tarot/09-hermit.jpg"},
 {name:"Wheel of Fortune",meaning:"Cycles, destiny, turning point",image:"assets/tarot/10-wheel.jpg"},
 {name:"Justice",meaning:"Truth, fairness, accountability",image:"assets/tarot/11-justice.jpg"},
 {name:"The Hanged Man",meaning:"Pause, surrender, perspective",image:"assets/tarot/12-hanged.jpg"},
 {name:"Death",meaning:"Endings, rebirth, transformation",image:"/assets/tarot/13-death.jpg"},
 {name:"Temperance",meaning:"Balance, harmony, integration",image:"/assets/tarot/14-temperance.jpg"},
 {name:"The Devil",meaning:"Attachments, shadow self",image:"/assets/tarot/15-devil.jpg"},
 {name:"The Tower",meaning:"Sudden change, revelation",image:"/assets/tarot/16-tower.jpg"},
 {name:"The Star",meaning:"Hope, renewal, guidance",image:"/assets/tarot/17-star.jpg"},
 {name:"The Moon",meaning:"Illusion, intuition, subconscious",image:"/assets/tarot/18-moon.jpg"},
 {name:"The Sun",meaning:"Joy, vitality, success",image:"/assets/tarot/19-sun.jpg"},
 {name:"Judgement",meaning:"Awakening, inner call",image:"/assets/tarot/20-judgement.jpg"},
 {name:"The World",meaning:"Completion, fulfillment",image:"/assets/tarot/21-world.jpg"}
];

/* ---------- TAROT LOGIC ---------- */
function getTodaysDraw(){
  const saved=localStorage.getItem("daily_tarot");
  if(!saved) return null;
  const data=JSON.parse(saved);
  if(new Date(data.date).toDateString()===new Date().toDateString()){
    return data.card;
  }
  return null;
}

function saveTodaysDraw(index){
  localStorage.setItem("daily_tarot",JSON.stringify({
    card:index,
    date:new Date().toISOString()
  }));
}

function displayCard(index){
  const c=majorArcana[index];
  document.getElementById("tarot-card").innerHTML=`
    <img src="${c.image}" alt="${c.name}" class="tarot-card-img">
    <div><strong>${c.name}</strong></div>
    <div>${c.meaning}</div>
  `;
}

function updateTimer(){
  const btn=document.getElementById("draw-btn");
  if(!btn.disabled) return;
  let timer=document.querySelector(".tarot-timer");
  if(!timer){
    timer=document.createElement("div");
    timer.className="tarot-timer";
    document.getElementById("tarot-container").appendChild(timer);
  }
  const now=new Date();
  const tomorrow=new Date(now);
  tomorrow.setHours(24,0,0,0);
  const mins=Math.floor((tomorrow-now)/60000);
  timer.textContent=`Next draw in ${Math.floor(mins/60)}h ${mins%60}m`;
}

function drawCard(){
  const i=Math.floor(Math.random()*majorArcana.length);
  saveTodaysDraw(i);
  displayCard(i);
  const btn=document.getElementById("draw-btn");
  btn.disabled=true;
  btn.textContent="Card Drawn for Today ✦";
  updateTimer();
}

(function initTarot(){
  const btn=document.getElementById("draw-btn");
  const saved=getTodaysDraw();
  if(saved!==null){
    displayCard(saved);
    btn.disabled=true;
    btn.textContent="Card Drawn for Today ✦";
    updateTimer();
    setInterval(updateTimer,60000);
  }else{
    document.getElementById("tarot-card").innerHTML=
      `<div class="tarot-placeholder">Draw your daily card ✵</div>`;
  }
  btn.addEventListener("click",drawCard);
})();
  
/* ---------- SIGN WIKI LINKS ---------- */
const signWikiLinks = {
  Aries: "aries.html",
  Taurus: "taurus.html",
  Gemini: "gemini.html",
  Cancer: "cancer.html",
  Leo: "leo.html",
  Virgo: "virgo.html",
  Libra: "libra.html",
  Scorpio: "scorpio.html",
  Sagittarius: "sagittarius.html",
  Capricorn: "capricorn.html",
  Aquarius: "aquarius.html",
  Pisces: "pisces.html"
};

document.querySelectorAll(".sign-btn").forEach(btn=>{
  const sign = btn.dataset.sign;
  if(signWikiLinks[sign]){
    btn.href = signWikiLinks[sign];
    btn.title = `${sign} Wiki`;
  }
});  /* ---------- ASPECTS ---------- */
const aspects=[
  {n:"conjunction",a:0,o:6,k:"focus"},
  {n:"opposition",a:180,o:6,k:"polarity"},
  {n:"square",a:90,o:5,k:"tension"},
  {n:"trine",a:120,o:5,k:"flow"},
  {n:"sextile",a:60,o:4,k:"opportunity"}
];

let found=[];
const names=Object.keys(planets);
for(let i=0;i<names.length;i++){
  for(let j=i+1;j<names.length;j++){
    aspects.forEach(x=>{
      if(Math.abs(diff(planets[names[i]].pos,planets[names[j]].pos)-x.a)<=x.o){
        found.push({a:names[i],b:names[j],asp:x});
      }
    });
  }
}

found.slice(0,3).forEach(t=>{
  const cA=signColors[planets[t.a].sign];
  const cB=signColors[planets[t.b].sign];
  wrap.innerHTML+=`
  <div class="transit">
    <div class="transit-header">
      <div>
        <span class="label">Transit:</span>
        ${t.a} in <span style="color:${cA}">${planets[t.a].sign}</span>
        ${t.asp.n}
        ${t.b} in <span style="color:${cB}">${planets[t.b].sign}</span>
      </div>
      <div class="glyphs">
        <span class="astro-symbol">
          <span style="color:${cA}">${planetSymbols[t.a]}${signSymbols[planets[t.a].sign]}</span>
          ${aspectSymbols[t.asp.n]}
          <span style="color:${cB}">${planetSymbols[t.b]}${signSymbols[planets[t.b].sign]}</span>
        </span>
      </div>
    </div>
    <div><span class="label">Keyword:</span>${t.asp.k}</div>
    <div><span class="label">Affecting:</span>${planets[t.a].domain} & ${planets[t.b].domain}</div>
    <div><span class="label">Motion:</span>${t.a} ${planets[t.a].motion}, ${t.b} ${planets[t.b].motion}</div>
  </div>`;

});
</script>
</body>
</html>
