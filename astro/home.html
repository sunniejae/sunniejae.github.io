<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Starry Jae — Daily Transits</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="icon" type="image/png" href="https://sunniejae.blob.core.windows.net/sunniejae/logo.png">

<style>
:root{
  --black:#000010;--silver:#f0f0f5;--gray:#bfbfdc;
  --accent:#00c9c2;--primary:#9a9ad4;--secondary:#c13886
}
@font-face{font-family:'Jaewriting';src:url('/assets/Jaewriting-Regular.otf')}
@font-face{font-family:'Milky';src:url('/assets/tan-mon-cheri.woff')}
@font-face{font-family:'Astro';src:url('/assets/Astrocomplete-Regular.otf')}

*{margin:0;padding:0;box-sizing:border-box}
body{
  background:var(--black);color:var(--silver);
  font-family:'Jaewriting',system-ui,sans-serif;
  line-height:1.6;overflow-x:hidden
}

nav{
  display:flex;justify-content:space-between;align-items:center;
  padding:2rem 3rem;background:rgba(0,0,16,0.8);
  backdrop-filter:blur(20px)
}
.logo{
  font-family:'Milky';font-size:2rem;letter-spacing:3px;
  background:linear-gradient(135deg,#ffb3d6,var(--accent),var(--primary));
  -webkit-background-clip:text;-webkit-text-fill-color:transparent
}
.nav-links{display:flex;gap:2rem}
.nav-links a{color:var(--gray);text-decoration:none}

.container{max-width:1200px;margin:auto;padding:4rem 2rem}

.card{
  background:linear-gradient(135deg,rgba(154,154,212,.08),rgba(63,61,122,.4));
  border-radius:30px;padding:3rem;margin-bottom:3rem
}

h2{
  font-family:'Milky';font-size:2.2rem;margin-bottom:2rem;
  background:linear-gradient(135deg,var(--silver),var(--primary));
  -webkit-background-clip:text;-webkit-text-fill-color:transparent
}

.transit{
  margin-bottom:2rem;padding:1.5rem;
  background:rgba(63,61,122,.4);
  border-left:3px solid var(--primary);
  border-radius:15px
}

.transit-header{
  display:flex;justify-content:space-between;gap:1rem;flex-wrap:wrap
}

.glyphs{
  background:rgba(0,0,0,.3);
  padding:.5rem 1rem;border-radius:25px
}

.astro-symbol{
  font-family:'Astro';
  font-size:1.8rem;
  letter-spacing:.35rem;
  white-space:nowrap
}

.label{
  color:var(--accent);
  font-family:'Milky';
  text-transform:uppercase;
  margin-right:.5rem
}

.sign-grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(140px,1fr));
  gap:1rem
}
.sign-btn{
  padding:1rem;border-radius:50px;
  background:rgba(154,154,212,.2);
  text-align:center;text-decoration:none;
  font-family:'Astro';color:var(--silver)
}

.tarot-display{text-align:center}
.tarot-card-img{max-width:280px;border-radius:15px}
.draw-button{margin-top:2rem;padding:1rem 3rem;border-radius:50px}

.tarot-placeholder{color:var(--gray);font-style:italic}
.tarot-timer{color:var(--accent);margin-top:.5rem}
</style>
</head>

<body>

<nav>
  <div class="logo">Starry Jae</div>
  <div class="nav-links">
    <a href="astro/sign.html">Sign Wikis</a>
    <a href="index.html">Home</a>
    <a href="shop/home.html">Shop</a>
  </div>
</nav>

<div class="container">

<div class="card">
  <h2>Today's Transits</h2>
  <div id="transits"></div>
</div>

<div class="card">
  <h2>Daily Tarot Draw</h2>
  <div id="tarot-container">
    <div id="tarot-card" class="tarot-display"></div>
    <button id="draw-btn" class="draw-button">Draw Your Card</button>
  </div>
</div>

<div class="card">
  <h2>Explore Your Sign</h2>
  <div class="sign-grid">
    <a class="sign-btn" data-sign="Aries">♈ a</a>
    <a class="sign-btn" data-sign="Taurus">♉ u</a>
    <a class="sign-btn" data-sign="Gemini">♊ g</a>
    <a class="sign-btn" data-sign="Cancer">♋ c</a>
    <a class="sign-btn" data-sign="Leo">♌ l</a>
    <a class="sign-btn" data-sign="Virgo">♍ m</a>
    <a class="sign-btn" data-sign="Libra">♎ b</a>
    <a class="sign-btn" data-sign="Scorpio">♏ s</a>
    <a class="sign-btn" data-sign="Sagittarius">♐ t</a>
    <a class="sign-btn" data-sign="Capricorn">♑ n</a>
    <a class="sign-btn" data-sign="Aquarius">♒ q</a>
    <a class="sign-btn" data-sign="Pisces">♓ p</a>
  </div>
</div>

</div>

<script>
/* ---------- AUTO MIDNIGHT REFRESH ---------- */
function scheduleMidnightRefresh(){
  const now = new Date();
  const midnight = new Date(now);
  midnight.setDate(midnight.getDate()+1);
  midnight.setHours(0,0,1,0);
  setTimeout(()=>location.reload(), midnight-now);
}
scheduleMidnightRefresh();

/* ---------- UTIL ---------- */
const norm = d => ((d%360)+360)%360;
const diff = (a,b)=>Math.abs(a-b)>180?360-Math.abs(a-b):Math.abs(a-b);

/* ---------- SYMBOLS ---------- */
const planetSymbols={Sun:'S',Moon:'M',Mercury:'R',Venus:'V',Mars:'P',Jupiter:'J',Saturn:'T',Uranus:'U',Neptune:'N',Pluto:'O',Chiron:'i',Node:'A'};
const signSymbols={Aries:'a',Taurus:'u',Gemini:'g',Cancer:'c',Leo:'l',Virgo:'m',Libra:'b',Scorpio:'s',Sagittarius:'t',Capricorn:'n',Aquarius:'q',Pisces:'p'};
const signColors={
  Aries:'#E74C3C',Taurus:'#27AE60',Gemini:'#F39C12',Cancer:'#3498DB',
  Leo:'#E67E22',Virgo:'#16A085',Libra:'#9B59B6',Scorpio:'#8E44AD',
  Sagittarius:'#C0392B',Capricorn:'#2C3E50',Aquarius:'#1ABC9C',Pisces:'#5DADE2'
};
const aspectSymbols={conjunction:'&',opposition:'-',square:'!',trine:'k',sextile:"'"};

/* ---------- PLANETS ---------- */
const planets={
  Sun:{lon:280,speed:.9856,domain:"identity"},
  Moon:{lon:90,speed:13.176,domain:"emotions"},
  Mercury:{lon:270,speed:-1.2,domain:"communication"},
  Venus:{lon:275,speed:1.2,domain:"love"},
  Mars:{lon:260,speed:.5,domain:"action"},
  Jupiter:{lon:100,speed:-.083,domain:"growth"},
  Saturn:{lon:330,speed:.033,domain:"structure"},
  Uranus:{lon:50,speed:-.012,domain:"change"},
  Neptune:{lon:355,speed:.006,domain:"dreams"},
  Pluto:{lon:300,speed:.004,domain:"transformation"},
  Chiron:{lon:15,speed:.01,domain:"healing"},
  Node:{lon:350,speed:-.003,domain:"destiny"}
};

const signs=["Aries","Taurus","Gemini","Cancer","Leo","Virgo","Libra","Scorpio","Sagittarius","Capricorn","Aquarius","Pisces"];
const ref=new Date("2026-01-01");
const days=Math.floor((new Date()-ref)/86400000);

Object.values(planets).forEach(p=>{
  p.pos=norm(p.lon+p.speed*days);
  p.sign=signs[Math.floor(p.pos/30)];
  p.motion=p.speed<0?"Retrograde":"Direct";
});

/* ---------- MOON PHASE ---------- */
function getMoonPhase(){
  const syn=29.530588853;
  const ref=new Date("2024-01-11T11:57:00Z");
  const age=((new Date()-ref)/86400000)%syn;
  if(age<1.8) return {name:"New Moon",glyph:","};
  if(age<5.5) return {name:"Waxing Crescent",glyph:"k"};
  if(age<9.2) return {name:"First Quarter",glyph:"Y"};
  if(age<12.9) return {name:"Waxing Gibbous",glyph:"h"};
  if(age<16.6) return {name:"Full Moon",glyph:"z"};
  if(age<20.3) return {name:"Waning Gibbous",glyph:"j"};
  if(age<24) return {name:"Last Quarter",glyph:"W"};
  return {name:"Waning Crescent",glyph:"Zs"};
}

const wrap=document.getElementById("transits");
const moonPhase=getMoonPhase();
const moonColor=signColors[planets.Moon.sign];

wrap.innerHTML+=`
<div class="transit">
  <div class="transit-header">
    <div><span class="label">Moon Phase:</span>${moonPhase.name} in <span style="color:${moonColor}">${planets.Moon.sign}</span></div>
    <div class="glyphs">
      <span class="astro-symbol" style="color:${moonColor}">${moonPhase.glyph}</span>
    </div>
  </div>
</div>`;

/* ---------- ASPECTS ---------- */
const aspects=[
  {n:"conjunction",a:0,o:6,k:"focus"},
  {n:"opposition",a:180,o:6,k:"polarity"},
  {n:"square",a:90,o:5,k:"tension"},
  {n:"trine",a:120,o:5,k:"flow"},
  {n:"sextile",a:60,o:4,k:"opportunity"}
];

let found=[];
const names=Object.keys(planets);
for(let i=0;i<names.length;i++){
  for(let j=i+1;j<names.length;j++){
    aspects.forEach(x=>{
      if(Math.abs(diff(planets[names[i]].pos,planets[names[j]].pos)-x.a)<=x.o){
        found.push({a:names[i],b:names[j],asp:x});
      }
    });
  }
}

found.slice(0,3).forEach(t=>{
  const cA=signColors[planets[t.a].sign];
  const cB=signColors[planets[t.b].sign];
  wrap.innerHTML+=`
  <div class="transit">
    <div class="transit-header">
      <div>
        <span class="label">Transit:</span>
        ${t.a} in <span style="color:${cA}">${planets[t.a].sign}</span>
        ${t.asp.n}
        ${t.b} in <span style="color:${cB}">${planets[t.b].sign}</span>
      </div>
      <div class="glyphs">
        <span class="astro-symbol">
          <span style="color:${cA}">${planetSymbols[t.a]}${signSymbols[planets[t.a].sign]}</span>
          ${aspectSymbols[t.asp.n]}
          <span style="color:${cB}">${planetSymbols[t.b]}${signSymbols[planets[t.b].sign]}</span>
        </span>
      </div>
    </div>
    <div><span class="label">Keyword:</span>${t.asp.k}</div>
    <div><span class="label">Affecting:</span>${planets[t.a].domain} & ${planets[t.b].domain}</div>
    <div><span class="label">Motion:</span>${t.a} ${planets[t.a].motion}, ${t.b} ${planets[t.b].motion}</div>
  </div>`;
});
</script>
</body>
</html>
