<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta name="description" content="Discover your NAYA bias and shop exclusive merchandise" />
<title>Sunnie Jae's SWITH Shop</title>

<style>
@font-face {
  font-family: "Brat";
  src: url("assets/Jaewriting-Regular.ttf");
  font-display: swap;
}

:root {
  --primary: #f5f0ff;
  --secondary: #2b1d4f;
  --light: #7a5cff;
  --dark: #9a1dff;
  --accent: #b00b13;
  --transition-speed: 0.3s;
  --ease-out: cubic-bezier(0.16, 1, 0.3, 1);
}

* { box-sizing: border-box; margin: 0; padding: 0; }

body {
  font-family: system-ui, -apple-system, sans-serif;
  background: var(--primary);
  color: var(--secondary);
  line-height: 1.6;
}

body.theme-transition * {
  transition: background-color var(--transition-speed) var(--ease-out),
              color var(--transition-speed) var(--ease-out),
              border-color var(--transition-speed) var(--ease-out);
}

/* ================= HEADER ================= */

header {
  background: linear-gradient(135deg, var(--dark), var(--light));
  padding: 2rem 1.5rem;
  text-align: center;
  color: #fff;
}

header h1 {
  font-family: "Brat", system-ui;
  font-size: clamp(2rem, 5vw, 2.6rem);
  margin-bottom: 1.5rem;
}

.member-selector {
  display: flex;
  gap: 0.75rem;
  justify-content: center;
  flex-wrap: wrap;
  margin-bottom: 1.5rem;
}

.member-btn {
  padding: 0.6rem 1.2rem;
  border-radius: 999px;
  border: none;
  background: rgba(255,255,255,0.2);
  color: white;
  font-weight: 600;
  cursor: pointer;
}

.member-btn.active {
  background: white;
  color: var(--secondary);
}

.quiz-btn {
  background: var(--accent);
  color: white;
  border: none;
  border-radius: 999px;
  padding: 0.9rem 2rem;
  font-weight: 700;
  cursor: pointer;
}

/* ================= HERO ================= */

.hero {
  max-width: 1200px;
  margin: 3rem auto;
  padding: 0 1rem;
}

.hero img {
  width: 100%;
  height: clamp(260px, 40vw, 420px);
  object-fit: cover;
  border-radius: 1.5rem;
}

/* ================= PRODUCTS ================= */

main {
  max-width: 1200px;
  margin: auto;
  padding: 3rem 1rem;
}

.section-title {
  font-family: "Brat";
  text-align: center;
  margin-bottom: 2.5rem;
}

.product-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
  gap: 2rem;
}

.product-card {
  background: white;
  padding: 1.5rem;
  border-radius: 1.25rem;
  box-shadow: 0 6px 20px rgba(0,0,0,0.1);
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

.product-card img {
  width: 100%;
  height: 230px;
  object-fit: cover;
  border-radius: 1rem;
}

.product-card h3 {
  font-family: "Brat";
}

.wishlist-controls {
  display: flex;
  gap: 0.75rem;
  margin-top: auto;
}

input[type="number"] {
  width: 70px;
  padding: 0.4rem;
}

.product-btn {
  background: var(--accent);
  color: white;
  border-radius: 999px;
  padding: 0.6rem 1.2rem;
  border: none;
  cursor: pointer;
  text-align: center;
  text-decoration: none;
  flex: 1;
}

/* ================= QUIZ ================= */

#quiz, #quizResult {
  display: none;
  max-width: 650px;
  margin: 4rem auto;
  padding: 3rem 2rem;
  background: white;
  border-radius: 1.5rem;
  box-shadow: 0 20px 60px rgba(0,0,0,0.15);
}

#quiz.active, #quizResult.active { display: block; }

#quizAnswers button {
  padding: 1rem;
  border-radius: 1rem;
  border: 2px solid var(--light);
  background: white;
  cursor: pointer;
  font-weight: 600;
}

/* ================= WISHLIST FAB ================= */

#wishlistFab {
  position: fixed;
  bottom: 2rem;
  right: 2rem;
  width: 64px;
  height: 64px;
  border-radius: 50%;
  background: var(--accent);
  color: white;
  border: none;
  font-size: 1.6rem;
  cursor: pointer;
}
</style>
</head>

<body>

<header>
  <h1>Sunnie Jae's SWITH Shop</h1>
  <div id="memberSelector" class="member-selector" role="radiogroup"></div>
  <button class="quiz-btn" onclick="QuizController.start()">✨ Take the Bias Quiz</button>
</header>

<div class="hero">
  <img id="heroImg" alt="Hero image" />
</div>

<main>
  <h2 class="section-title">Exclusive Merchandise</h2>
  <div id="productGrid" class="product-grid"></div>
</main>

<section id="quiz">
  <h2 id="quizQuestion"></h2>
  <div id="quizAnswers"></div>
</section>

<section id="quizResult">
  <img id="resultImage" />
  <h2 id="resultMemberName"></h2>
  <p id="resultDescription"></p>
</section>

<button id="wishlistFab" onclick="WishlistManager.openEmail()">♡</button>

<script>
/* ================= DATA ================= */

const MEMBERS = {
  SUMIN: {
    name: "SUMIN",
    type: "ENTP",
    palette: { primary:"#f5f0ff", secondary:"#2b1d4f", light:"#7a5cff", dark:"#9a1dff", accent:"#b00b13" },
    heroImage: "assets/hero-SUMIN.png",
    resultImage: "assets/result-SUMIN.png",
    description: "Bold, fast-thinking, magnetic."
  },
  SIEUN: {
    name: "SIEUN",
    type: "ISFJ",
    palette: { primary:"#fff6ec", secondary:"#4a2c1d", light:"#ffb26b", dark:"#c97a3d", accent:"#e63946" },
    heroImage: "assets/hero-SIEUN.png",
    resultImage: "assets/result-SIEUN.png",
    description: "Warm, loyal, deeply caring."
  },
  ISA: {
    name: "ISA",
    type: "ESFJ",
    palette: { primary:"#ecfdf3", secondary:"#065f46", light:"#34d399", dark:"#047857", accent:"#2563eb" },
    heroImage: "assets/hero-ISA.png",
    resultImage: "assets/result-ISA.png",
    description: "Social, dependable, grounding."
  }
};

const PRODUCTS = [
  { id:"keychain", name:"Lightstick Keychain", image:"keychain", wishlist:true },
  { id:"phonecase", name:"Planet Phone Case", image:"phonecase", wishlist:true },
  { id:"stickers", name:"Sticker Pack", image:"stickers", vendors:[{label:"Shop Redbubble", url:"https://www.redbubble.com"}] }
];

const QUIZ = [
  { letter:"E", question:"You gain energy by:", answers:["People","Alone"] },
  { letter:"N", question:"You trust more:", answers:["Ideas","Facts"] },
  { letter:"T", question:"You decide using:", answers:["Logic","Feelings"] },
  { letter:"P", question:"You prefer:", answers:["Flexibility","Structure"] },
  { vibe:true, question:"Favorite color?", map:{A:"SUMIN",B:"SIEUN",C:"ISA"}, answers:["Purple","Orange","Blue"] },
  { vibe:true, question:"Ideal weekend?", map:{A:"SUMIN",B:"SIEUN",C:"ISA"}, answers:["Explore","Rest","Socialize"] }
];

/* ================= STATE ================= */

const state = {
  currentBias: localStorage.getItem("bias") || "SUMIN",
  wishlist: JSON.parse(localStorage.getItem("wishlist") || "[]"),
  quizAnswers: [],
  quizIndex: 0
};

/* ================= THEME ================= */

function applyTheme(key) {
  const p = MEMBERS[key].palette;
  Object.entries(p).forEach(([k,v]) =>
    document.documentElement.style.setProperty(`--${k}`, v)
  );
}

/* ================= MEMBER SELECTOR ================= */

const MemberSelector = {
  render() {
    const box = document.getElementById("memberSelector");
    box.innerHTML = "";
    Object.keys(MEMBERS).forEach(k => {
      const b = document.createElement("button");
      b.textContent = MEMBERS[k].name;
      b.className = "member-btn" + (k===state.currentBias?" active":"");
      b.setAttribute("aria-checked", k===state.currentBias?"true":"false");
      b.onclick = () => this.select(k);
      box.appendChild(b);
    });
  },
  select(k) {
    state.currentBias = k;
    localStorage.setItem("bias", k);
    applyTheme(k);
    HeroImage.update();
    ProductGrid.render();
    this.render();
  }
};

/* ================= HERO ================= */

const HeroImage = {
  update() {
    document.getElementById("heroImg").src = MEMBERS[state.currentBias].heroImage;
  }
};

/* ================= PRODUCTS ================= */

const ProductGrid = {
  render() {
    const grid = document.getElementById("productGrid");
    grid.innerHTML = "";
    PRODUCTS.forEach(p => {
      const c = document.createElement("div");
      c.className = "product-card";
      c.innerHTML = `
        <h3>${p.name}${p.wishlist ? ` – ${state.currentBias} ver.` : ""}</h3>
        <img src="assets/${p.image}-${state.currentBias}.png" />
      `;
      if (p.wishlist) {
        const qty = document.createElement("input");
        qty.type="number"; qty.value=1; qty.min=1; qty.id=`qty-${p.id}`;
        const btn = document.createElement("button");
        btn.className="product-btn";
        btn.textContent="Add to Wishlist";
        btn.onclick = e => WishlistManager.add(p.id, e);
        const box = document.createElement("div");
        box.className="wishlist-controls";
        box.append(qty,btn);
        c.appendChild(box);
      } else {
        p.vendors.forEach(v => {
          const a = document.createElement("a");
          a.href=v.url; a.target="_blank"; a.className="product-btn";
          a.textContent=v.label;
          c.appendChild(a);
        });
      }
      grid.appendChild(c);
    });
  }
};

/* ================= WISHLIST ================= */

const WishlistManager = {
  add(id, event) {
    const qty = Number(document.getElementById(`qty-${id}`).value || 1);
    const existing = state.wishlist.find(i => i.id===id && i.member===state.currentBias);
    if (existing) existing.qty += qty;
    else state.wishlist.push({id, member:state.currentBias, qty});
    localStorage.setItem("wishlist", JSON.stringify(state.wishlist));
    const btn = event.target;
    btn.textContent="✓ Added";
    setTimeout(()=>btn.textContent="Add to Wishlist",1200);
  },
  openEmail() {
    if (!state.wishlist.length) return alert("Wishlist is empty!");
    let body="Hello Sunnie Jae Team,\n\n";
    state.wishlist.forEach(i => body+=`${i.member} – ${i.id} × ${i.qty}\n`);
    location.href=`mailto:orders@sunniejae.com?subject=NAYA Order&body=${encodeURIComponent(body)}`;
  }
};

/* ================= QUIZ ================= */

const QuizController = {
  start() {
    state.quizIndex=0;
    state.quizAnswers=[];
    document.getElementById("quiz").classList.add("active");
    document.getElementById("quizResult").classList.remove("active");
    this.show();
  },
  show() {
    const q = QUIZ[state.quizIndex];
    quizQuestion.textContent=q.question;
    quizAnswers.innerHTML="";
    q.answers.forEach((a,i)=>{
      const b=document.createElement("button");
      b.textContent=a;
      b.onclick=()=>this.answer(i);
      quizAnswers.appendChild(b);
    });
  },
  answer(choice) {
    state.quizAnswers.push({...QUIZ[state.quizIndex], choice});
    state.quizIndex++;
    state.quizIndex<QUIZ.length ? this.show() : this.finish();
  },
  finish() {
    const scores={SUMIN:0,SIEUN:0,ISA:0};
    const mbti = state.quizAnswers.filter(q=>q.letter)
      .map(q=>q.choice===0?q.letter:this.opposite(q.letter)).join("");
    Object.entries(MEMBERS).forEach(([k,m])=>{
      [...m.type].forEach((c,i)=>c===mbti[i]&&(scores[k]+=5));
    });
    state.quizAnswers.filter(q=>q.vibe).forEach(q=>{
      scores[q.map[String.fromCharCode(65+q.choice)]]+=3;
    });
    const winner=Object.entries(scores).sort((a,b)=>b[1]-a[1])[0][0];
    const percent=Math.round((scores[winner]/(4*5+2*3))*100);
    this.showResult(winner,percent);
  },
  showResult(k,p) {
    state.currentBias=k;
    applyTheme(k);
    HeroImage.update();
    MemberSelector.render();
    ProductGrid.render();
    resultImage.src=MEMBERS[k].resultImage;
    resultMemberName.textContent=MEMBERS[k].name;
    resultDescription.textContent=`${p}% match — ${MEMBERS[k].description}`;
    quiz.classList.remove("active");
    quizResult.classList.add("active");
  },
  opposite(l){return{E:"I",I:"E",N:"S",S:"N",T:"F",F:"T",P:"J",J:"P"}[l];}
};

/* ================= INIT ================= */

document.addEventListener("DOMContentLoaded",()=>{
  applyTheme(state.currentBias);
  MemberSelector.render();
  HeroImage.update();
  ProductGrid.render();
});
</script>
</body>
</html>
