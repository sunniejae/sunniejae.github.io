<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sunnie Jae - Digital Art</title>
<link rel="icon" type="image/png" href="/assets/favicon.png">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<meta name="p:domain_verify" content="282c1149f313f61846925d7d39577f4d"/>
<style>
:root {
    --black: #000010;
    --white: #ffffff;
    --dark-gray: #404040;
    --gray: #bfbfdc;
    --silver: #f0f0f5;
    --pink: #ffb3d6;
    --teal: #00a8a3;
    --dark-purple: #3f3d7a;
    --accent: #00c9c2;
    --secondary: #c13886;
    --primary: #9a9ad4;
    --shadow: 0 2px 8px rgba(0,0,16,0.15);
    --shadow-hover: 0 8px 32px rgba(0,0,16,0.25);
    --gradient: linear-gradient(135deg, var(--accent), var(--primary));
    --gradient-secondary: linear-gradient(135deg, var(--secondary), var(--pink));
}

a {
    text-decoration: none;
    color: inherit
}
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    background: var(--silver);
    color: var(--black);
    line-height: 1.5;
}

/* Header */
header {
    position: sticky;
    top: 0;
    z-index: 1000;
    background: var(--gray);
    border-bottom: 2px solid var(--silver);
    padding: 16px 20px;
    display: flex;
    align-items: center;
    gap: 12px;
    box-shadow: var(--shadow);
}

.logo {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-right: 20px;
}

.logo-icon {
    width: 36px;
    height: 36px;
    background: var(--gradient);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--white);
    font-weight: 700;
    font-size: 18px;
    box-shadow: var(--shadow);
}

.logo-text {
    font-weight: 700;
    font-size: 20px;
    color: var(--dark-purple);
}

.nav-pills {
    display: flex;
    gap: 8px;
    margin-right: auto;
}

.nav-pill {
    padding: 12px 20px;
    border-radius: 25px;
    background: var(--dark-purple);
    color: var(--white);
    text-decoration: none;
    font-weight: 500;
    font-size: 16px;
    transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    border: 2px solid transparent;
}

.nav-pill:first-child {
    background: var(--gradient);
    box-shadow: var(--shadow);
}

.nav-pill:not(:first-child) {
    background: transparent;
    color: var(--dark-purple);
    border: 2px solid var(--gray);
}

.nav-pill:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-hover);
}

.nav-pill:not(:first-child):hover {
    background: var(--gray);
    border-color: var(--primary);
}

.nav-pill:first-child:hover {
    background: var(--gradient-secondary);
}

.search-container {
    flex: 1;
    max-width: 600px;
    margin: 0 20px;
}

.search-box {
    width: 100%;
    padding: 16px 24px;
    border: 2px solid var(--gray);
    border-radius: 30px;
    background: var(--white);
    font-size: 16px;
    outline: none;
    transition: all 0.3s ease;
    color: var(--black);
}

.search-box:focus {
    border-color: var(--accent);
    box-shadow: 0 0 0 4px rgba(0, 201, 194, 0.1);
}

.search-box::placeholder {
    color: var(--gray);
}

.profile-actions {
    display: flex;
    align-items: center;
    gap: 12px;
}

.profile-btn {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background: var(--silver);
    border: 2px solid var(--gray);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 18px;
    transition: all 0.3s ease;
    color: var(--dark-purple);
}

.profile-btn:hover {
    background: var(--accent);
    color: var(--white);
    transform: translateY(-2px);
    box-shadow: var(--shadow);
}

/* Masonry Layout */
.container {
    max-width: 1400px;
    margin: 0 auto;
    padding: 24px;
}

.masonry {
    columns: 5;
    column-gap: 20px;
}

.pin {
    break-inside: avoid;
    margin-bottom: 20px;
    position: relative;
    border-radius: 20px;
    overflow: hidden;
    background: var(--white);
    transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    cursor: pointer;
    border: 1px solid var(--silver);
}

.pin:hover {
    transform: translateY(-8px) scale(1.02);
    box-shadow: var(--shadow-hover);
    border-color: var(--gray);
}

.pin-image {
    position: relative;
    overflow: hidden;
    background: var(--black);
}

.pin img,
.pin video {
    width: 100%;
    height: auto;
    display: block;
    transition: transform 0.4s ease;
}

.pin:hover img,
.pin:hover video {
    transform: scale(1.08);
}

.pin-overlay {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(to bottom, rgba(0,0,16,0.1) 0%, rgba(0,0,16,0.3) 100%);
    opacity: 0;
    transition: opacity 0.3s ease;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    padding: 20px;
}

.pin:hover .pin-overlay {
    opacity: 1;
}

.pin-actions {
    display: flex;
    justify-content: flex-end;
    gap: 12px;
}

.action-btn {
    background: var(--gradient);
    color: var(--white);
    border: none;
    padding: 12px 24px;
    border-radius: 25px;
    font-weight: 600;
    font-size: 13px;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: var(--shadow);
}

.action-btn:hover {
    background: var(--gradient-secondary);
    transform: translateY(-2px);
    box-shadow: var(--shadow-hover);
}

.tags-btn {
    background: var(--gradient-secondary);
    padding: 6px 12px;
    font-size: 10px;
    font-weight: 300;
    border-radius: 18px;
}

.tags-btn:hover {
    background: var(--gradient);
}

.dropdown-menu {
    position: absolute;
    top: 70px;
    background: var(--white);
    border: 2px solid var(--gray);
    border-radius: 16px;
    padding: 16px;
    box-shadow: var(--shadow-hover);
    display: none;
    z-index: 1000;
    min-width: 200px;
}

.dropdown-menu.active {
    display: flex;
}

.tags-menu {
    left: 20px;
    flex-wrap: wrap;
    gap: 8px;
    max-width: 280px;
}

.share-menu {
    right: 20px;
    flex-direction: column;
    gap: 8px;
}

.tag-item {
    background: var(--silver);
    color: var(--dark-purple);
    padding: 8px 12px;
    border-radius: 20px;
    font-size: 12px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s ease;
    border: 1px solid var(--gray);
    user-select: none;
}

.tag-item:hover {
    background: var(--accent);
    color: var(--white);
    transform: translateY(-2px);
    box-shadow: var(--shadow);
}

.share-option {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 12px 16px;
    border-radius: 8px;
    text-decoration: none;
    color: var(--dark-purple);
    transition: all 0.2s ease;
    font-weight: 500;
    border: 1px solid transparent;
}

.share-option:hover {
    background: var(--silver);
    border-color: var(--gray);
    transform: translateX(4px);
}

.share-option.copy-link:hover {
    background: var(--accent);
    color: var(--white);
}

.share-option[data-platform="twitter"]:hover {
    background: #1da1f2;
    color: var(--white);
}

.share-option[data-platform="pinterest"]:hover {
    background: var(--secondary);
    color: var(--white);
}

.share-option[data-platform="tumblr"]:hover {
    background: var(--dark-purple);
    color: var(--white);
}

.pin-info {
    padding: 16px;
    background: var(--white);
}

.pin-title {
    font-weight: 600;
    font-size: 18px;
    color: var(--black);
    margin-bottom: 8px;
}

.pin-description {
    font-size: 14px;
    color: var(--dark-gray);
    line-height: 1.5;
}

/* Modal */
.modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 16, 0.85);
    backdrop-filter: blur(8px);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 2000;
    animation: fadeIn 0.3s ease;
}

.modal.active {
    display: flex;
}

.modal-content {
    position: relative;
    max-width: 90vw;
    max-height: 90vh;
    background: var(--white);
    border-radius: 20px;
    overflow: hidden;
    box-shadow: 0 20px 60px rgba(0, 0, 16, 0.5);
    animation: scaleIn 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

.modal-media {
    width: 800px;
    height: 600px;
    max-width: 90vw;
    max-height: 90vh;
    object-fit: contain;
    display: block;
    background: var(--black);
}

.modal-close {
    position: absolute;
    top: 20px;
    right: 20px;
    width: 44px;
    height: 44px;
    background: var(--gradient);
    color: var(--white);
    border: none;
    border-radius: 50%;
    cursor: pointer;
    font-size: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease;
    box-shadow: var(--shadow-hover);
    z-index: 1;
}

.modal-close:hover {
    background: var(--gradient-secondary);
    transform: rotate(90deg) scale(1.1);
}

/* Chat Button */
.chat-button {
    position: fixed;
    bottom: 30px;
    right: 30px;
    width: 64px;
    height: 64px;
    background: var(--gradient);
    color: var(--white);
    border: none;
    border-radius: 50%;
    cursor: pointer;
    box-shadow: var(--shadow-hover);
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 24px;
    z-index: 1000;
}

.chat-button:hover {
    background: var(--gradient-secondary);
    transform: scale(1.1) rotate(10deg);
}

.chat-window {
    position: fixed;
    bottom: 110px;
    right: 30px;
    width: 350px;
    max-height: 450px;
    background: var(--white);
    border: 2px solid var(--gray);
    border-radius: 20px;
    box-shadow: var(--shadow-hover);
    display: none;
    flex-direction: column;
    z-index: 1000;
    overflow: hidden;
}

.chat-window.active {
    display: flex;
}

.chat-header {
    background: var(--gradient);
    color: var(--white);
    padding: 20px;
    font-weight: 600;
    font-size: 18px;
    text-align: center;
}

.chat-messages {
    padding: 20px;
    max-height: 350px;
    overflow-y: auto;
    flex: 1;
}

.message {
    background: var(--silver);
    padding: 16px 20px;
    border-radius: 18px;
    margin-bottom: 16px;
    color: var(--black);
    font-size: 15px;
    line-height: 1.5;
    border: 1px solid var(--gray);
    animation: slideIn 0.3s ease;
}

.message:nth-child(even) {
    background: var(--pink);
}

.message:nth-child(odd) {
    background: var(--pink);
}

/* Notification */
.notification {
    position: fixed;
    top: 100px;
    right: 30px;
    background: var(--gradient);
    color: white;
    padding: 16px 24px;
    border-radius: 12px;
    z-index: 10000;
    font-size: 14px;
    font-weight: 600;
    box-shadow: var(--shadow-hover);
    animation: slideIn 0.3s ease;
}

.notification.tag-search {
    background: var(--gradient-secondary);
}

/* Animations */
@keyframes slideIn {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes slideOut {
    from {
        opacity: 1;
        transform: translateY(0);
    }
    to {
        opacity: 0;
        transform: translateY(-20px);
    }
}

@keyframes fadeIn {
    from {
        opacity: 0;
    }
    to {
        opacity: 1;
    }
}

@keyframes scaleIn {
    from {
        opacity: 0;
        transform: scale(0.9);
    }
    to {
        opacity: 1;
        transform: scale(1);
    }
}

/* Responsive Design */
@media (max-width: 1200px) {
    .masonry { columns: 4; }
}

@media (max-width: 900px) {
    .masonry { columns: 3; }
    .nav-pills { display: none; }
    .container { padding: 20px; }
}

@media (max-width: 600px) {
    .masonry { columns: 2; }
    .search-container { margin: 0 12px; }
    header { padding: 12px 16px; }
    .logo-text { display: none; }
}

@media (max-width: 480px) {
    .masonry { columns: 1; }
    .container { padding: 16px; }
    .chat-window { 
        width: calc(100vw - 32px);
        right: 16px;
    }
    .chat-button {
        width: 56px;
        height: 56px;
        bottom: 20px;
        right: 20px;
    }
}

/* Scrollbar */
.chat-messages::-webkit-scrollbar {
    width: 6px;
}

.chat-messages::-webkit-scrollbar-track {
    background: var(--silver);
    border-radius: 10px;
}

.chat-messages::-webkit-scrollbar-thumb {
    background: var(--gray);
    border-radius: 10px;
}

.chat-messages::-webkit-scrollbar-thumb:hover {
    background: var(--primary);
}
</style>
</head>
<body>

<header>
    <div class="logo">
        <div class="logo-icon">S</div>
        <div class="logo-text">Sunnie Jae</div>
    </div>
    
    <nav class="nav-pills">
        <a href="/index.html" class="nav-pill">Home</a>
        <a href="/portfolio/digital-art.html" class="nav-pill">Gallery</a>
        <a href="/portfolio/profile-info.html" class="nav-pill">About</a>
    </nav>
    
    <div class="search-container">
        <input type="search" class="search-box" placeholder="Search keywords...">
    </div>
    
    <div class="profile-actions">
        <button class="profile-btn"><a href="/shop/home.html">üîî</a></button>
        <button class="profile-btn"><a href="/contact.html">üí¨</a></button>
        <button class="profile-btn"><a href="/club/public/club.html">ü´Ç</a></button>
    </div>
</header>

<div class="container">
    <div class="masonry" id="masonry"></div>
</div>

<button class="chat-button">üí¨</button>
<div class="chat-window" id="chatWindow">
    <div class="chat-header">Messages from Sunnie Jae</div>
    <div class="chat-messages" id="chatMessages"></div>
</div>

<div class="modal" id="modal">
    <button class="modal-close" id="closeModal">‚ùå</button>
    <div class="modal-content" id="modalContent"></div>
</div>

<script>
// Pin data
const pinData = [
    { 
        id: "4", 
        title: "Webcomic Self Portrait", 
        description: "Exploring techniques", 
        tags: ["webcomic", "self portrait"], 
        type: "image" 
    },
    { 
        id: "2", 
        title: "Siberian", 
        description: "Color block portrait of a cat", 
        tags: ["cat", "pet art"], 
        type: "image" 
    },
    { 
        id: "3", 
        title: "Winter Speedpaint", 
        description: "Colorblock speedpaint video", 
        tags: ["video", "speedpaint"], 
        type: "video", 
        poster: "/assets/digitalart/3.png", 
        src: "/assets/videos/3.mp4" 
    },

    { 
        id: "1", 
        title: "If I Knew Then", 
        description: "Exploring techniques", 
        tags: ["digital art", "surreal"], 
        type: "image" 
    },
    
     { 
        id: "6", 
        title: "Finale", 
        description: "First OT7 izna", 
        tags: ["digital art", "color block", "kpop", "izna"], 
        type: "image" 
    },

  { 
        id: "7", 
        title: "Hailey", 
        description: "Webcomic portrait of the main character in Love Bites Back", 
        tags: ["digital art", "webcomic", "hailey", "love bites back"], 
        type: "image" 
    },  { 
        id: "8", 
        title: "It's (a bubblegum), Bitch", 
        description: "Webcomic styled celebrity portrait", 
        tags: ["digital art", "webcomic", "celebrity", "britney spears"], 
        type: "image" 
    },
      { 
        id: "9", 
        title: "Now You See Me", 
        description: "surreal portrait", 
        tags: ["digital art", "commissioned", "portrait"], 
        type: "image" 
    },
      { 
        id: "10", 
        title: "MoonSun", 
        description: "Moonbyul and Solar from Mamamoo", 
        tags: ["digital art", "color block", "kpop", "mamamoo"], 
        type: "image" 
    },
      { 
        id: "11", 
        title: "Bombshell", 
        description: "Digital art celebrity portrait", 
        tags: ["digital art", "color block", "kpop", "izna"], 
        type: "image" 
    },
      { 
        id: "12", 
        title: "Flowers Pt 1", 
        description: "honeysuckle, orchid, and sunflower", 
        tags: ["digital art", "flowers"], 
        type: "image" 
    },
      { 
        id: "13", 
        title: "Flowers Pt 2", 
        description: "peony, dandelion, and rose ", 
        tags: ["digital art", "flowers"], 
        type: "image" 
    },
      { 
        id: "14", 
        title: "Crystals Pt 1", 
        description: "turquoise, amethyst, sapphire, emerald, and diamond", 
        tags: ["digital art", "crystals"], 
        type: "image" 
    },
      { 
        id: "15", 
        title: "Going, Going...", 
        description: "First OT7 izna", 
        tags: ["digital art", "surreal", "commissioned"], 
        type: "image" 
    },
      { 
        id: "16", 
        title: "Am I Pretty Yet?", 
        description: "Portrait inspired by vintage blush", 
        tags: ["digital art", "out of my mind", "portrait"], 
        type: "image" 
    },
]
const chatMessages = [
    "heeyyy, welcome to my digital art portfolio ‚ú®",
    "no pressure, but you can share any images using the share button on the post.",
    "if you're looking for something special, you can use the search bar for keywords or titles",
    "if you're bored of looking at these, i probably have something else you haven't checked out yet",
    "you can go back to the home page and open more folders",
    "or you can push random buttons on this feed and see if anything exciting happens",
    "anyway i'm starting to infodump at this point üòÖ",
    "enjoy looking at.. whatever you wanna look at on sunniejae.com",
    "byeeeee üíñ"
];

// DOM elements
const masonry = document.getElementById("masonry");
const searchBox = document.querySelector('.search-box');
const chatButton = document.querySelector('.chat-button');
const chatWindow = document.getElementById('chatWindow');
const chatMessagesContainer = document.getElementById('chatMessages');
const modal = document.getElementById('modal');
const modalContent = document.getElementById('modalContent');
const closeModalBtn = document.getElementById('closeModal');

// State
let chatIndex = 0;

// Lazy loading observer
const lazyObserver = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
        if (entry.isIntersecting) {
            const el = entry.target;
            if (el.dataset.src) {
                el.src = el.dataset.src;
                lazyObserver.unobserve(el);
            }
        }
    });
}, { rootMargin: "200px" });

// Utility functions
function showNotification(message, isTagSearch = false) {
    const notification = document.createElement('div');
    notification.className = `notification ${isTagSearch ? 'tag-search' : ''}`;
    notification.textContent = message;
    document.body.appendChild(notification);
    
    setTimeout(() => {
        notification.style.animation = 'slideOut 0.3s ease';
        setTimeout(() => notification.remove(), 300);
    }, 2000);
}

function buildPinHTML(pin) {
    const mediaHTML = pin.type === "video"
        ? `<video muted loop playsinline preload="none" poster="${pin.poster}" data-src="${pin.src}"></video>`
        : `<img data-src="/assets/digitalart/${pin.id}.png" alt="${pin.title}">`;

    const tagsHTML = pin.tags.map(t => `<span class="tag-item" data-tag="${t}">#${t}</span>`).join("");

    return `
        <div class="pin-image">
            ${mediaHTML}
            <div class="pin-overlay">
                <div class="pin-actions">
                    <button class="action-btn tags-btn" data-pin-id="${pin.id}">Tags</button>
                    <button class="action-btn share-btn" data-pin-id="${pin.id}">Share</button>
                    <div class="dropdown-menu tags-menu" id="tags-${pin.id}">${tagsHTML}</div>
                    <div class="dropdown-menu share-menu" id="menu-${pin.id}">
                        <a href="#" class="share-option copy-link" data-pin-id="${pin.id}">üîó Copy link</a>
                        <a href="#" class="share-option" data-platform="twitter" data-pin-id="${pin.id}">üñ§ X</a>
                        <a href="#" class="share-option" data-platform="pinterest" data-pin-id="${pin.id}">üß° Pinterest</a>
                        <a href="#" class="share-option" data-platform="tumblr" data-pin-id="${pin.id}">üíú Tumblr</a>
                    </div>
                </div>
            </div>
        </div>
        <div class="pin-info">
            <div class="pin-title">${pin.title}</div>
            <div class="pin-description">${pin.description}</div>
        </div>
    `;
}

// Render pins
function renderPins() {
    pinData.forEach(pin => {
        const el = document.createElement("div");
        el.className = "pin";
        el.dataset.pinId = pin.id;
        el.innerHTML = buildPinHTML(pin);
        masonry.appendChild(el);

        const media = el.querySelector("img, video");
        if (media) lazyObserver.observe(media);

        const video = el.querySelector("video");
        if (video) {
            el.addEventListener("mouseenter", () => video.play().catch(() => {}));
            el.addEventListener("mouseleave", () => {
                video.pause();
                video.currentTime = 0;
            });
        }

        // Click to open modal
        el.addEventListener("click", (e) => {
            if (!e.target.closest('.tags-btn') && !e.target.closest('.share-btn') && 
                !e.target.closest('.dropdown-menu')) {
                openModal(pin);
            }
        });
    });
}

// Modal functions
function openModal(pin) {
    modalContent.innerHTML = '';
    
    if (pin.type === "video") {
        const video = document.createElement('video');
        video.className = 'modal-media';
        video.src = pin.src;
        video.poster = pin.poster;
        video.controls = true;
        video.autoplay = true;
        video.loop = true;
        modalContent.appendChild(video);
    } else {
        const img = document.createElement('img');
        img.className = 'modal-media';
        img.src = `/assets/digitalart/${pin.id}.png`;
        img.alt = pin.title;
        modalContent.appendChild(img);
    }
    
    modal.classList.add('active');
}

function closeModal() {
    modal.classList.remove('active');
    setTimeout(() => {
        modalContent.innerHTML = '';
    }, 300);
}

closeModalBtn.addEventListener('click', closeModal);
modal.addEventListener('click', (e) => {
    if (e.target === modal) closeModal();
});
document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') closeModal();
});

// Event delegation for all clicks
document.addEventListener('click', (e) => {
    const target = e.target;

    // Tags button
    if (target.classList.contains('tags-btn')) {
        e.stopPropagation();
        const menu = document.getElementById(`tags-${target.dataset.pinId}`);
        closeAllMenus(menu);
        menu.classList.toggle('active');
    }

    // Tag item
    if (target.classList.contains('tag-item')) {
        searchBox.value = target.dataset.tag;
        searchBox.focus();
        searchBox.dispatchEvent(new Event('input', { bubbles: true }));
        closeAllMenus();
        showNotification(`üè∑Ô∏è Searching for "${target.dataset.tag}"`, true);
    }

    // Share button
    if (target.classList.contains('share-btn')) {
        e.stopPropagation();
        const menu = document.getElementById(`menu-${target.dataset.pinId}`);
        closeAllMenus(menu);
        menu.classList.toggle('active');
    }

    // Copy link
    if (target.closest('.copy-link')) {
        e.preventDefault();
        const pinId = target.closest('.copy-link').dataset.pinId;
        const imageUrl = `https://sunniejae.com/assets/digitalart/${pinId}.png`;
        
        navigator.clipboard.writeText(imageUrl).then(() => {
            showNotification('üîó Link copied!');
        });
    }

    // Social sharing
    const shareLink = target.closest('.share-option:not(.copy-link)');
    if (shareLink) {
        e.preventDefault();
        const { platform, pinId } = shareLink.dataset;
        const pin = pinData.find(p => p.id === pinId);
        const imageUrl = `https://sunniejae.com/assets/digitalart/${pinId}.png`;
        const text = `${pin.title} - ${pin.description} by Sunnie Jae`;
        
        const shareUrls = {
            twitter: `https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}&url=${encodeURIComponent(imageUrl)}`,
            pinterest: `https://pinterest.com/pin/create/button/?url=${encodeURIComponent(window.location.href)}&media=${encodeURIComponent(imageUrl)}&description=${encodeURIComponent(text)}`,
            tumblr: `https://www.tumblr.com/widgets/share/tool?posttype=photo&title=${encodeURIComponent(pin.title)}&caption=${encodeURIComponent(pin.description)}&source=${encodeURIComponent(imageUrl)}`
        };
        
        if (shareUrls[platform]) {
            window.open(shareUrls[platform], '_blank', 'width=600,height=600');
        }
    }

    // Close menus when clicking outside
    if (!target.closest('.share-btn') && !target.closest('.tags-btn') && 
        !target.closest('.dropdown-menu')) {
        closeAllMenus();
    }
});

function closeAllMenus(except = null) {
    document.querySelectorAll('.dropdown-menu').forEach(menu => {
        if (menu !== except) {
            menu.classList.remove('active');
        }
    });
}

// Search functionality
searchBox.addEventListener('input', (e) => {
    const searchTerm = e.target.value.toLowerCase();
    
    document.querySelectorAll('.pin').forEach(pin => {
        const pinId = pin.dataset.pinId;
        const pinInfo = pinData.find(p => p.id === pinId);
        
        const searchableText = [
            pinInfo.title,
            pinInfo.description,
            ...pinInfo.tags
        ].join(' ').toLowerCase();
        
        pin.style.display = searchableText.includes(searchTerm) || !searchTerm ? 'block' : 'none';
    });
});

// Chat functionality
chatButton.addEventListener('click', () => {
    chatWindow.classList.toggle('active');
    
    if (chatWindow.classList.contains('active') && chatIndex === 0) {
        const interval = setInterval(() => {
            if (chatIndex >= chatMessages.length) {
                clearInterval(interval);
                return;
            }
            
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message';
            messageDiv.textContent = chatMessages[chatIndex];
            chatMessagesContainer.appendChild(messageDiv);
            chatMessagesContainer.scrollTop = chatMessagesContainer.scrollHeight;
            chatIndex++;
        }, 2000);
    }
});

// Initialize
renderPins();
</script>

</body>
</html>